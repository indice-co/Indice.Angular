<div *ngIf="loaded && (activeConfig.layout === 'Stacked' || !activeConfig.layout)" [style.display]="!loaded ? 'none':'block'" class="shell-container active-side-pane">

  <div class="shell-header-container" *ngIf="activeConfig.showHeader">
    <div [class]="activeConfig.fluid ? 'shell-header-container-inner-fluid' : 'shell-header-container-inner'">
      <ng-container *ngIf="activeConfig.customHeaderComponent">
        <div appDynamicComponentHost ="Header"></div>
      </ng-container>
      <lib-shell-header *ngIf="!activeConfig.customHeaderComponent"
        [show-userName]="activeConfig.showUserNameOnHeader"
        [show-alerts]="activeConfig.showAlertsOnHeader"></lib-shell-header>
    </div>
  </div>

  <main [class]="activeConfig.showHeader ? 'shell-content-container' : 'shell-content-container-no-header'">
    <div [class]="activeConfig.fluid ? 'shell-content-container-inner-fluid' : 'shell-content-container-inner'">
      <router-outlet *ngIf="loaded && (activeConfig.layout === 'Stacked' || !activeConfig.layout)"></router-outlet>
    </div>
  </main>

  <div class="shell-footer-container" *ngIf="activeConfig.showFooter">
    <div [class]="activeConfig.fluid ? 'shell-footer-container-inner-fluid' : 'shell-footer-container-inner'">
      <ng-container *ngIf="activeConfig.customFooterComponent">
        <div appDynamicComponentHost hostName="Footer"></div>
      </ng-container>
      <lib-shell-footer *ngIf="!activeConfig.customFooterComponent"></lib-shell-footer>
    </div>
  </div>

  <lib-side-pane #rightPane>
    <router-outlet name="rightpane" (activate)="rightPane.onSidePaneActivated($event)" (deactivate)="rightPane.onSidePaneDeactivated($event)"></router-outlet>
  </lib-side-pane>

  <lib-toaster-container></lib-toaster-container>
</div>

<!-- SIDEBAR LAYOUT -->

<div *ngIf="loaded && activeConfig.layout === 'Sidebar'" [style.display]="!loaded ? 'none':'block'" class="sidebar shell-container active-side-pane">

  <!-- Off-canvas menu for mobile, show/hide based on off-canvas menu state. -->
  <div class="relative z-40 md:hidden" role="dialog" aria-modal="true">
    <!--
      Off-canvas menu backdrop, show/hide based on off-canvas menu state.

      Entering: "transition-opacity ease-linear duration-300"
        From: "opacity-0"
        To: "opacity-100"
      Leaving: "transition-opacity ease-linear duration-300"
        From: "opacity-100"
        To: "opacity-0"
    -->
    <div class="fixed inset-0 bg-gray-600 bg-opacity-75"></div>

    <div class="fixed inset-0 flex z-40">
      <!--
        Off-canvas menu, show/hide based on off-canvas menu state.

        Entering: "transition ease-in-out duration-300 transform"
          From: "-translate-x-full"
          To: "translate-x-0"
        Leaving: "transition ease-in-out duration-300 transform"
          From: "translate-x-0"
          To: "-translate-x-full"
      -->
      <div class="relative flex-1 flex flex-col max-w-xs w-full pb-4 bg-gray-800">
        <!--
          Close button, show/hide based on off-canvas menu state.

          Entering: "ease-in-out duration-300"
            From: "opacity-0"
            To: "opacity-100"
          Leaving: "ease-in-out duration-300"
            From: "opacity-100"
            To: "opacity-0"
        -->
        <div class="absolute top-0 right-0 -mr-12 pt-2">
          <button type="button" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
            <span class="sr-only">Close sidebar</span>
            <!-- Heroicon name: outline/x -->
            <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <!-- <div class="flex-shrink-0 flex items-center px-4">
          <a href="#" [routerLink]="['/']"><img class="app-logo" [src]="activeConfig.appLogo" [alt]="activeConfig.appLogoAlt" /></a>
        </div> -->
        <div class="flex-1 h-0 overflow-y-auto">
          <lib-shell-sidebar [config]="activeConfig" ></lib-shell-sidebar>
        </div>
      </div>

      <div class="flex-shrink-0 w-14" aria-hidden="true">
        <!-- Dummy element to force sidebar to shrink to fit close icon -->
      </div>
    </div>
  </div>

  <!-- Static sidebar for desktop -->
  <div class="hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-gray-800">
    <lib-shell-sidebar [config]="activeConfig" ></lib-shell-sidebar>
  </div>

  <div class="md:pl-64 flex flex-col">

    <div class="sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow">
      <button type="button" class="px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500">
        <span class="sr-only">Open sidebar</span>
        <!-- Heroicon name: outline/menu-alt-2 -->
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" />
        </svg>
      </button>

      <div class="flex-1">
        <div class="shell-header-container">
            <lib-shell-header [shell-layout]="activeConfig.layout"  [show-userName]="activeConfig.showUserNameOnHeader" [show-alerts]="activeConfig.showAlertsOnHeader"></lib-shell-header>
        </div>
      </div>
    </div>

    <main class="shell-content-container-sidebar">
      <div class="shell-content-container-inner">
        <router-outlet *ngIf="loaded && activeConfig.layout === 'Sidebar'"></router-outlet>
      </div>
    </main>
  </div>

  <lib-side-pane #rightPane>
    <router-outlet name="rightpane" (activate)="rightPane.onSidePaneActivated($event)" (deactivate)="rightPane.onSidePaneDeactivated($event)"></router-outlet>
  </lib-side-pane>

  <lib-toaster-container></lib-toaster-container>

</div>
